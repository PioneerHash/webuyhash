<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>webuyhash.com - Pool Business Calculator</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>webuyhash.com</h1>
            <p class="subtitle">Pool Business Calculator</p>
            <div class="live-indicator">
                <span class="pulse"></span>
                <span class="live-text">LIVE</span>
                <span class="last-update" id="lastUpdate">--</span>
            </div>
        </header>

        <main>
            <!-- Network Stats Panel -->
            <section class="card network-stats">
                <h2>Network Stats</h2>
                <div class="stats-grid">
                    <div class="stat">
                        <span class="stat-label">Network Hashrate</span>
                        <span class="stat-value" id="networkHashrate">--</span>
                    </div>
                    <div class="stat">
                        <span class="stat-label">Difficulty</span>
                        <span class="stat-value" id="difficulty">--</span>
                    </div>
                    <div class="stat">
                        <span class="stat-label">Block Reward</span>
                        <span class="stat-value" id="blockReward">3.125 BTC</span>
                    </div>
                </div>
            </section>

            <!-- Input Section -->
            <section class="card inputs">
                <h2>Pool Parameters</h2>

                <!-- Hashrate Available -->
                <div class="input-group with-formula">
                    <div class="input-side">
                        <div class="input-header">
                            <label for="hashrate">Hashrate Available</label>
                            <button class="info-toggle" data-info="hashrate-info" aria-label="More info">?</button>
                        </div>
                        <div class="info-box" id="hashrate-info">
                            The total hashrate your pool has access to from connected miners. This determines your share of the network's block rewards.
                        </div>
                        <div class="input-with-unit">
                            <input type="number" id="hashrate" value="10" min="0" step="0.1">
                            <select id="hashrateUnit">
                                <option value="TH">TH/s</option>
                                <option value="PH" selected>PH/s</option>
                                <option value="EH">EH/s</option>
                            </select>
                        </div>
                    </div>
                    <div class="formula-side">
                        <div class="formula-label">Network Share</div>
                        <div class="formula-display" id="hashrate-formula">
                            <span class="formula-equation">Your Hashrate ÷ Network Hashrate</span>
                            <span class="formula-values" id="hashrate-values">-- ÷ -- = --%</span>
                        </div>
                    </div>
                </div>

                <!-- Pool Fee -->
                <div class="input-group with-formula">
                    <div class="input-side">
                        <div class="input-header">
                            <label for="poolFee">Pool Fee %</label>
                            <button class="info-toggle" data-info="poolfee-info" aria-label="More info">?</button>
                        </div>
                        <div class="info-box" id="poolfee-info">
                            The percentage fee your pool charges miners. Industry standard is 1-3%. This is your revenue as a pool operator.
                        </div>
                        <div class="slider-input">
                            <input type="range" id="poolFeeSlider" min="0" max="10" step="0.1" value="2">
                            <input type="number" id="poolFee" value="2" min="0" max="10" step="0.1">
                            <span class="unit">%</span>
                        </div>
                    </div>
                    <div class="formula-side">
                        <div class="formula-label">Your Fee Revenue</div>
                        <div class="formula-display" id="fee-formula">
                            <span class="formula-equation">Pool's Total Daily BTC × Your Fee %</span>
                            <span class="formula-values" id="fee-values">-- × --% = --</span>
                        </div>
                    </div>
                </div>

                <!-- Calculation Formula -->
                <div class="input-group with-formula">
                    <div class="input-side">
                        <div class="input-header">
                            <label for="formula">Calculation Formula</label>
                            <button class="info-toggle" data-info="formula-info" aria-label="More info">?</button>
                        </div>
                        <div class="info-box" id="formula-info">
                            <strong>Difficulty-based:</strong> Uses Bitcoin's difficulty target directly. Most mathematically precise.<br><br>
                            <strong>Hashrate-ratio:</strong> Uses your share of network hashrate. Simpler and more intuitive.
                        </div>
                        <select id="formula">
                            <option value="difficulty">Difficulty-based</option>
                            <option value="hashrate" selected>Hashrate ratio</option>
                        </select>
                    </div>
                    <div class="formula-side">
                        <div class="formula-label">Daily BTC Formula</div>
                        <div class="formula-display" id="calc-formula">
                            <span class="formula-equation" id="calc-equation">(Hashrate ÷ Network) × 144 × Reward</span>
                            <span class="formula-values" id="calc-values">-- = -- BTC/day</span>
                        </div>
                    </div>
                </div>

            </section>

            <!-- Results Section -->
            <section class="card results">
                <div class="results-header">
                    <h2>Pool Revenue Projections</h2>
                    <div class="unit-toggle">
                        <button class="toggle-btn active" data-unit="btc">BTC</button>
                        <button class="toggle-btn" data-unit="sats">Sats</button>
                    </div>
                </div>

                <div class="pool-share">
                    <div class="share-stat">
                        <span class="share-label">Your % of Network</span>
                        <span class="share-value" id="networkShare">--</span>
                    </div>
                    <div class="share-stat">
                        <span class="share-label">Expected Blocks/Day</span>
                        <span class="share-value" id="expectedBlocks">--</span>
                    </div>
                </div>

                <div class="results-table-container">
                    <table class="results-table">
                        <thead>
                            <tr>
                                <th>Period</th>
                                <th id="amountHeader">BTC</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Daily</td>
                                <td id="dailyAmount">--</td>
                            </tr>
                            <tr>
                                <td>Weekly</td>
                                <td id="weeklyAmount">--</td>
                            </tr>
                            <tr>
                                <td>Monthly</td>
                                <td id="monthlyAmount">--</td>
                            </tr>
                            <tr>
                                <td>Yearly</td>
                                <td id="yearlyAmount">--</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

            </section>

        </main>

        <footer>
            <p>Data from <a href="https://mempool.space" target="_blank">mempool.space</a> API</p>
            <p>webuyhash.com | Block <span id="blockHeight">--</span></p>
        </footer>
    </div>

    <script type="module" src="js/main.js"></script>
</body>
</html>
